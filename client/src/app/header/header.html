<header class="w-full h-14 bg-primary text-secondary flex items-center justify-between px-4 shadow-md">
  <!-- Toggle sidebar button -->
  <button
    (click)="onToggleClick()"
    aria-label="Toggle sidebar"
    class="p-2 rounded-md hover:bg-secondary/20"
    title="Toggle sidebar"
  >
    â˜°
  </button>

  <h1 class="font-title text-lg font-bold text-secondary">AI Chat Service</h1>

  <div class="relative">
    <ng-container *ngIf="(user$ | async) as user; else guest">
      <!-- Logged in -->
      <button (click)="showDropdown = !showDropdown" class="px-3 py-1 rounded hover:bg-secondary/20">
        {{ user.username }}
      </button>

      <!-- Dropdown menu -->
      <div
        *ngIf="showDropdown"
        class="absolute right-0 mt-2 w-40 bg-white text-black rounded shadow-lg"
      >
        <button
          (click)="logout()"
          class="block w-full text-left px-4 py-2 hover:bg-gray-100"
        >
          Logout
        </button>
      </div>
    </ng-container>

    <!-- Guest -->
    <ng-template #guest>
      <button
        (click)="toggleAuthDialog()"
        class="px-3 py-1 rounded bg-secondary text-primary hover:bg-secondary/80"
      >
        Login / Sign Up
      </button>
    </ng-template>
  </div>

  <!-- Auth dialog -->
  <app-auth-dialog
    *ngIf="showAuthDialog"
    (close)="toggleAuthDialog()"
  ></app-auth-dialog>
</header>
